# {{PROJECT_NAME}} - Branching & Commit Strategy

**Generated by Proto Gear v{{VERSION}}**
**Project**: {{PROJECT_NAME}}
**Ticket Prefix**: {{TICKET_PREFIX}}

---

## üìö Related Documentation

This file is part of the Proto Gear documentation system. For complete context, also review:

- **AGENTS.md** - Agent workflows, collaboration patterns, and capability discovery
- **PROJECT_STATUS.md** - Current project state, active tickets, sprint info
- **TESTING.md** (if exists) - TDD methodology and testing patterns
- **.proto-gear/INDEX.md** (if exists) - Available capabilities and git workflows
- **.proto-gear/workflows/feature-development.md** (if exists) - Complete feature development process

---

## Workflow Mode

{{WORKFLOW_MODE}}
{{WORKFLOW_RECOMMENDATIONS}}

---

## Overview

This document defines the branching model and commit conventions for {{PROJECT_NAME}}. Following these conventions ensures consistency across all contributors (human and AI).

---

## Branch Structure

### Main Branches

#### `{{MAIN_BRANCH}}`
- **Purpose**: Production-ready code
- **Status**: Always stable, deployable
- **Protection**: No direct commits{{REMOTE_REQUIRES_PR}}

#### `{{DEV_BRANCH}}`
- **Purpose**: Integration branch for development
- **Status**: Should always build{{REMOTE_REQUIRES_TESTS}}
- **Merges from**: Feature, bugfix branches
- **Merges to**: `{{MAIN_BRANCH}}`{{REMOTE_VIA_PR}}

### Working Branches

#### Feature Branches: `feature/{{TICKET_PREFIX}}-{number}-{description}`

**Examples**:
```
feature/{{TICKET_PREFIX}}-001-implement-auth
feature/{{TICKET_PREFIX}}-002-add-dashboard
```

**Use for**:
- New features
- Enhancements
- Non-urgent improvements

**Lifecycle**:
1. Branch from: `{{DEV_BRANCH}}`
2. Work on feature
3. Merge to: `{{DEV_BRANCH}}`{{MERGE_METHOD}}
4. Delete after merge

#### Bugfix Branches: `bugfix/{{TICKET_PREFIX}}-{number}-{description}`

**Examples**:
```
bugfix/{{TICKET_PREFIX}}-010-fix-login-error
bugfix/{{TICKET_PREFIX}}-011-resolve-crash
```

**Use for**:
- Bug fixes
- Error corrections
- Issue resolution

**Lifecycle**:
1. Branch from: `{{DEV_BRANCH}}`
2. Fix bug
3. Add regression test
4. Merge to: `{{DEV_BRANCH}}`{{MERGE_METHOD}}
5. Delete after merge

#### Hotfix Branches: `hotfix/v{version}-{issue}`

**Examples**:
```
hotfix/v1.2.1-critical-security-fix
hotfix/v1.2.1-data-loss-bug
```

**Use for**:
- Critical production bugs
- Security vulnerabilities
- Data loss issues

**Lifecycle**:
1. Branch from: `{{MAIN_BRANCH}}`
2. Apply minimal fix
3. Merge to: `{{MAIN_BRANCH}}` AND `{{DEV_BRANCH}}`
4. Tag new version immediately
5. Delete after merge

---

## Starting New Work

### Critical Rule: Always Branch FROM Development

**Never work directly on `{{MAIN_BRANCH}}` or `{{DEV_BRANCH}}`** - always create a feature branch.

**The Command** (works from any current branch):
```bash
# Create feature branch FROM development (regardless of current branch)
git checkout -b feature/{{TICKET_PREFIX}}-XXX-description {{DEV_BRANCH}}
```

**Example Workflow**:
```bash
# You can be on ANY branch - main, development, or another feature branch
# This command creates a new branch FROM development:
git checkout -b feature/{{TICKET_PREFIX}}-042-add-search {{DEV_BRANCH}}

# Do your work
git add .
git commit -m "feat(search): implement search functionality"

# Merge back to development when done
git checkout {{DEV_BRANCH}}
git merge feature/{{TICKET_PREFIX}}-042-add-search
git branch -d feature/{{TICKET_PREFIX}}-042-add-search
```

**Why This Matters**:
- ‚úÖ Your feature starts from the latest integration point ({{DEV_BRANCH}})
- ‚úÖ Works regardless of which branch you're currently on
- ‚úÖ Prevents accidentally working directly on {{MAIN_BRANCH}} or {{DEV_BRANCH}}
- ‚úÖ Keeps {{MAIN_BRANCH}} clean (release-only)

**Common Mistake to Avoid**:
```bash
# ‚ùå WRONG - Working directly on main or development
git checkout {{MAIN_BRANCH}}
# ... make changes directly ... (BAD!)

# ‚úÖ CORRECT - Always use a feature branch
git checkout -b feature/{{TICKET_PREFIX}}-XXX {{DEV_BRANCH}}
# ... make changes in the branch ... (GOOD!)
```

---

## Commit Message Convention

### Format

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Types

| Type | Description | Example |
|------|-------------|---------|
| `feat` | New feature | `feat(auth): add login functionality` |
| `fix` | Bug fix | `fix(api): handle null response` |
| `docs` | Documentation | `docs(readme): update setup instructions` |
| `style` | Code style | `style: apply formatting` |
| `refactor` | Refactoring | `refactor(db): optimize queries` |
| `perf` | Performance | `perf(api): cache responses` |
| `test` | Tests | `test(auth): add login tests` |
| `build` | Build system | `build: update dependencies` |
| `ci` | CI/CD | `ci: add test workflow` |
| `chore` | Maintenance | `chore: update version` |

### Subject Guidelines

- Use imperative mood: "add" not "added"
- Don't capitalize first letter
- No period at the end
- Maximum 50 characters

### Body (Optional)

- Wrap at 72 characters
- Explain what and why, not how
- Separate from subject with blank line

### Footer (When Applicable)

- Reference issues: `Closes {{TICKET_PREFIX}}-XXX`
- Breaking changes: `BREAKING CHANGE: description`

### Examples

```
feat(dashboard): add user analytics widget

Add real-time analytics widget showing active users,
session duration, and conversion metrics.

Closes {{TICKET_PREFIX}}-042
```

```
fix(api): handle timeout errors gracefully

API calls were failing without proper error handling
when external service timed out.

Fixes {{TICKET_PREFIX}}-089
```

---

## Workflow for Contributors

### Before Starting Work

1. **Check current branch**: Verify you're on `{{DEV_BRANCH}}`
2. **Pull latest changes**: `git pull{{REMOTE_ORIGIN}} {{DEV_BRANCH}}`{{IF_REMOTE}}
3. **Create feature branch**: `git checkout -b feature/{{TICKET_PREFIX}}-XXX-description`
4. **Verify branch name**: Follows convention exactly

### During Development

1. **Make focused commits**: One logical change per commit
2. **Write clear commit messages**: Follow convention above
3. **Test before committing**: Ensure code works
4. **Commit frequently**: Small commits are better
{{REMOTE_PUSH_DURING}}

### Before Merging

1. **Review all changes**: `git diff {{DEV_BRANCH}}`
2. **Ensure tests pass**: Run your test suite
3. **Update from {{DEV_BRANCH}}**: `git rebase {{DEV_BRANCH}}` (if behind)
{{REMOTE_PUSH_BEFORE_PR}}
{{LOCAL_MERGE_STEPS}}

---

## Working with AI Agents

### Conventions for AI Assistants

When working with AI assistants (Claude, GPT, etc.), ensure they:

‚úÖ **DO**:
- Create branches for all work
- Use descriptive branch names
- Write clear commit messages following convention
- Reference ticket numbers ({{TICKET_PREFIX}}-XXX)
- Test changes before committing{{REMOTE_PUSH_REGULARLY}}
- Update documentation when behavior changes

‚ùå **DON'T**:
- Commit directly to `{{MAIN_BRANCH}}`
- Commit directly to `{{DEV_BRANCH}}` for features
- Use vague commit messages
- Skip testing
- Make huge commits without breaking them down{{REMOTE_FORCE_PUSH}}

### AI Agent Communication

AI agents should communicate their approach:

```markdown
I'm going to:
1. Create branch: feature/{{TICKET_PREFIX}}-XXX-feature-name
2. Implement the feature
3. Write tests
4. Commit with message: "feat(scope): add feature"{{REMOTE_PUSH_STEP}}
{{REMOTE_CREATE_PR_OR_LOCAL_MERGE}}

Does this approach work for you?
```

{{REMOTE_HANDLING_SECTION}}

---

## Ticket Numbering

### Format: `{{TICKET_PREFIX}}-{number}`

- Start from: `{{TICKET_PREFIX}}-001`
- Increment sequentially
- Track in: {{TICKET_TRACKING}}

### Examples
```
{{TICKET_PREFIX}}-001: Implement user authentication
{{TICKET_PREFIX}}-002: Add dashboard widgets
{{TICKET_PREFIX}}-003: Fix login redirect issue
```

---

## Quick Reference

```
BRANCH PATTERNS:
feature/{{TICKET_PREFIX}}-XXX-description    ‚Üí New features
bugfix/{{TICKET_PREFIX}}-XXX-description     ‚Üí Bug fixes
hotfix/vX.Y.Z-issue                          ‚Üí Critical fixes

COMMIT FORMAT:
<type>(<scope>): <subject>

TYPES:
feat, fix, docs, style, refactor, perf, test, build, ci, chore

ALWAYS:
‚úÖ Branch from {{DEV_BRANCH}}
‚úÖ Use descriptive names
‚úÖ Write clear commits
‚úÖ Test before committing{{REMOTE_PUSH_REMINDER}}
{{REMOTE_CREATE_PR_REMINDER}}

NEVER:
‚ùå Commit to {{MAIN_BRANCH}} directly
‚ùå Use vague messages
‚ùå Skip testing{{REMOTE_FORCE_PUSH_REMINDER}}
```

---

**Document Status**: Active
**Generated**: {{GENERATION_DATE}}
**Maintained By**: {{PROJECT_NAME}} Team
**Tool**: Proto Gear AI Agent Framework

---

*This branching strategy was generated by Proto Gear to help maintain consistency in AI-assisted development. Customize this file to match your team's specific needs.*
